<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Redirecionando para o app...</title>
    <script>
      function getQueryParam(param) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(param);
      }

      const communityId = getQueryParam('id');

      if (communityId) {
        const deepLink = `bwepo://infocomunidades/${communityId}`;
        const androidStore = 'https://play.google.com/store/apps/details?id=com.matheusener.bwepo';
        const iosStore = 'https://apps.apple.com/br/app/bwepo/id6743187782'; // substitua pelo ID real do app

        const isAndroid = /android/i.test(navigator.userAgent);
        const isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);

        // Abre o deep link
        window.location.href = deepLink;

        // Se n찾o tiver o app instalado, redireciona para a loja ap처s 2 segundos
        setTimeout(() => {
          if (isAndroid) {
            window.location.href = androidStore;
          } else if (isIOS) {
            window.location.href = iosStore;
          } else {
            document.body.innerHTML = "<p>Por favor, abra este link em um dispositivo m처vel.</p>";
          }
        }, 2000);
      } else {
        document.write('<p>Erro: Comunidade n찾o encontrada. Verifique o link.</p>');
      }
    </script>
  </head>
  <body>
    <p>Redirecionando para a comunidade no app...</p>
  </body>
</html>
